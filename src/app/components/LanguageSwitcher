'use client'
import { useRouter, usePathname } from 'next/navigation'

export default function LanguageSwitcher() {
  const router = useRouter()
  const pathname = usePathname()
  
  const changeLanguage = (newLang) => {
    const segments = pathname.split('/')
    segments[1] = newLang
    router.push(segments.join('/'))
  }
  
  // Detecta o idioma atual do pathname
  const currentLang = pathname.split('/')[1] || 'pt'
  
  return (
    <div className="flex gap-2 items-center">
      <button 
        onClick={() => changeLanguage('pt')} 
        className={`
          relative flex items-center justify-center
          w-10 h-10 rounded-lg
          hover:scale-110 transition-all duration-200
          ${currentLang === 'pt' 
            ? 'ring-2 ring-yellow-400 bg-green-50 shadow-md' 
            : 'hover:bg-gray-100'
          }
        `}
        title="PortuguÃªs"
        aria-label="Mudar para PortuguÃªs"
      >
        <span className="text-3xl leading-none">ğŸ‡§ğŸ‡·</span>
      </button>
      
      <button 
        onClick={() => changeLanguage('en')} 
        className={`
          relative flex items-center justify-center
          w-10 h-10 rounded-lg
          hover:scale-110 transition-all duration-200
          ${currentLang === 'en' 
            ? 'ring-2 ring-yellow-400 bg-green-50 shadow-md' 
            : 'hover:bg-gray-100'
          }
        `}
        title="English"
        aria-label="Switch to English"
      >
        <span className="text-3xl leading-none">ğŸ‡¬ğŸ‡§</span>
      </button>
    </div>
  )
}
